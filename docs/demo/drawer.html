<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./common/mangoui.css">
  <style>
    html,body{
      height: 100%;
    }
  </style>
</head>
<body>
  <script src="./common/vue.global.min.js"></script>
  <script src="./common/mangoui.umd.js"></script>
  <div id="app">
    <mg-drawer v-model="show" :position="position" @closed="closed">
      <span style="padding-left: 12px;">我的 position 属性值为 {{ position }}</span>
    </mg-drawer>

    <mg-drawer v-model="outerShow" :width="'700px'" :title="'我是外层的标题'" :position="'right'" @closed="closed">
      <span>我是外层的内容</span>
      <mg-button @click="innerShow = true" :size="'mini'">打开内层</mg-button>
    </mg-drawer>

    <mg-drawer v-model="innerShow" :position="'right'" :modal-closable="false">
      <template v-slot:title>
        <h1 style="color: #0080FF;">我是内层的标题</h1>
      </template>
      <span>我会忽略蒙层点击</span>
      <mg-button @click="innerShow = false">点我关闭</mg-button>
    </mg-drawer>
  </div>
  <script>
    const App = {
      created() {
        document.body.addEventListener('click',(e)=>{
          console.log(e)
          if(e.target === document.body){
            window.parent.hideiframe()
          }
        })


        this.hash = location.hash.replace('#', '')
        window.addEventListener('message',(e)=>{
          const data = e.data
          this.ifrId = data.ifrId
          if(data.prop){
            this[data.prop] = true
          }else{
            this.position = data.p
            this.show = true
          }
        },false)
      },
      data() {
        return {
          hash: '',
          position:'left',
          show:false,
          outerShow:false,
          innerShow:false
        }
      },
      methods:{
        closed(){
          console.log('closed')
          setTimeout(()=>{
            window.parent.hideiframe()
          },150)
        }
      }
    }
    const app = Vue.createApp(App).use(mangoui.default).mount('#app')
  </script>
</body>
</html>