(function(o,a){typeof exports=="object"&&typeof module!="undefined"?module.exports=a(require("vue")):typeof define=="function"&&define.amd?define(["vue"],a):(o=typeof globalThis!="undefined"?globalThis:o||self,o.n=a(o.Vue))})(this,function(o){"use strict";function a(e){document.body.append(e)}function r(e,t,n){n!==void 0?e.style[t]=n:e.style=t}function w(e,t){e.addEventListener("transitionend",t,{once:!0})}const l={modalDom:null,initZIndex:null,zIndex:null,appended:!1,nextzIndex(){return this.zIndex+=2}};window.pop=l;function C(e){if(document.body.style.overflow="hidden",l.modalDom===null){const n=document.createElement("div");n.className="mg-modal",l.modalDom=n}let t=l.modalDom;l.appended?r(t,"z-index",l.nextzIndex()):(r(t,"z-index",l.zIndex),a(t),l.appended=!0)}function u(e){const t=e?.5:0;getComputedStyle(l.modalDom).opacity,r(l.modalDom,"opacity",t)}function g(){const e=l.modalDom;if(!e)return!1;const t=e.style.zIndex-4;return t>=l.initZIndex?(r(e,"z-index",t),l.zIndex=t+2):(l.zIndex-=2,w(e,()=>{const n=document.body;l.appended=!1,e.parentElement===n&&document.body.removeChild(e)}),document.body.style.overflow="",u()),!0}var h=Object.defineProperty,k=Object.prototype.hasOwnProperty,c=Object.getOwnPropertySymbols,b=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?h(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))k.call(t,n)&&p(e,n,t[n]);if(c)for(var n of c(t))b.call(t,n)&&p(e,n,t[n]);return e},i=o.defineComponent({name:"MgDrawer",props:{title:{default:null},width:{default:""},height:{default:""},drawerStyleObj:{default:{}},modelValue:{default:!1},mask:{default:!0},modalClosable:{default:!0},escClosable:{default:!1},position:{default:"left",type:String,validator:e=>["right","left","top","bottom"].includes(e)}},emits:["update:modelValue","open","opened","close","closed"],setup(e,t){const n=o.computed(()=>I({width:e.width,height:e.height},e.drawerStyleObj)),s=o.ref(0),m=o.ref(null);let f=!1;o.watchEffect(()=>{e.modelValue?(t.emit("open"),e.mask&&(C(),u(!0)),s.value=l.nextzIndex(),o.nextTick(()=>m.value.focus())):(f&&t.emit("close"),e.mask&&g())}),f=!0;const d=D=>{D.propertyName==="transform"&&(e.modelValue?t.emit("opened"):t.emit("closed"))},y=()=>{t.emit("update:modelValue",!1)};return{zIndex:s,contentStyles:n,warpRef:m,modalClick:()=>{e.modalClosable&&y()},escClose:()=>{e.escClosable&&y()},transitionend:d}}});const z={key:0,class:"mg-drawer-title"};function S(e,t,n,s,m,f){return o.openBlock(),o.createBlock(o.Transition,{name:"mg-drawer-"+e.position},{default:o.withCtx(()=>[e.modelValue?(o.openBlock(),o.createBlock("div",{key:0,ref:"warpRef",class:"mg-drawer-warp",tabindex:"-1",onKeydown:t[2]||(t[2]=o.withKeys((...d)=>e.escClose&&e.escClose(...d),["esc"])),onClick:t[3]||(t[3]=o.withModifiers((...d)=>e.modalClick&&e.modalClick(...d),["self"])),style:{zIndex:e.zIndex}},[e.modelValue?(o.openBlock(),o.createBlock("div",{key:0,class:["mg-drawer-content","mg-drawer-content-"+e.position],onTransitionend:t[1]||(t[1]=d=>e.transitionend(d)),style:e.contentStyles},[e.title?(o.openBlock(),o.createBlock("div",z,o.toDisplayString(e.title),1)):o.createCommentVNode("v-if",!0),e.title?o.createCommentVNode("v-if",!0):o.renderSlot(e.$slots,"title",{key:1}),o.renderSlot(e.$slots,"default")],38)):o.createCommentVNode("v-if",!0)],36)):o.createCommentVNode("v-if",!0)]),_:1},8,["name"])}i.render=S;var V={name:"MgDrawer",install(e,t={}){e.component(i.name,i)}};return V});
