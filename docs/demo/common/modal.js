(function(o,s){typeof exports=="object"&&typeof module!="undefined"?module.exports=s(require("vue")):typeof define=="function"&&define.amd?define(["vue"],s):(o=typeof globalThis!="undefined"?globalThis:o||self,o.n=s(o.Vue))})(this,function(o){"use strict";function s(e){document.body.append(e)}function m(e,n,d){d!==void 0?e.style[n]=d:e.style=n}function y(e,n){e.addEventListener("transitionend",n,{once:!0})}const t={modalDom:null,initZIndex:null,zIndex:null,appended:!1,nextzIndex(){return this.zIndex+=2}};window.pop=t;function p(e){if(document.body.style.overflow="hidden",t.modalDom===null){const d=document.createElement("div");d.className="mg-modal",t.modalDom=d}let n=t.modalDom;t.appended?m(n,"z-index",t.nextzIndex()):(m(n,"z-index",t.zIndex),s(n),t.appended=!0)}function c(e){const n=e?.5:0;getComputedStyle(t.modalDom).opacity,m(t.modalDom,"opacity",n)}function x(){const e=t.modalDom;if(!e)return!1;const n=e.style.zIndex-4;return n>=t.initZIndex?(m(e,"z-index",n),t.zIndex=n+2):(t.zIndex-=2,y(e,()=>{const d=document.body;t.appended=!1,e.parentElement===d&&document.body.removeChild(e)}),document.body.style.overflow="",c()),!0}var u=o.defineComponent({name:"MgModal",props:{width:{default:"40%"},height:{default:""},modalClosable:{default:!0},modal:{default:!0},modelValue:{default:!1}},data(){return{}},emits:["update:modelValue","open","opened","close","closed"],setup(e,n){const d=o.ref(0),l=o.ref(!1),r=o.ref(e.modelValue);function f(){c(!0),l.value=!0}function i(a){!l.value||(!a||a&&e.modalClosable)&&(x(),l.value=!1,n.emit("close"))}function g(a){a.propertyName==="top"&&(l.value?n.emit("opened"):(n.emit("closed"),n.emit("update:modelValue",!1),r.value=!1))}e.modelValue&&(p(),d.value=t.nextzIndex(),n.emit("open"),o.onMounted(()=>{f()})),o.watch(()=>e.modelValue,(a,w)=>{a?(r.value=!0,p(),d.value=t.nextzIndex(),n.emit("open"),o.nextTick(()=>{f()})):l.value&&i()});const h=o.computed(()=>({width:e.width,height:e.height}));return{display:r,styleObj:h,zIndex:d,warpActive:l,modalClick:i,transitionend:g}}});function z(e,n,d,l,r,f){return o.withDirectives((o.openBlock(),o.createBlock("div",{onTransitionend:n[1]||(n[1]=i=>e.transitionend(i)),onClick:n[2]||(n[2]=o.withModifiers(i=>e.modalClick(i),["self"])),class:["mg-dialog-warp",{"mg-dialog-warp-active":e.warpActive}],style:{zIndex:e.zIndex}},[o.createVNode("div",{class:"mg-dialog-content",style:e.styleObj},[o.renderSlot(e.$slots,"default")],4)],38)),[[o.vShow,e.display]])}u.render=z;var I={install(e,n={}){t.zIndex=t.initZIndex=n.zIndex||100,e.component(u.name,u),e.config.globalProperties.$confirm=t}};return I});
