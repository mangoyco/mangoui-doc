(function(t,s){typeof exports=="object"&&typeof module!="undefined"?module.exports=s(require("vue")):typeof define=="function"&&define.amd?define(["vue"],s):(t=typeof globalThis!="undefined"?globalThis:t||self,t.n=s(t.Vue))})(this,function(t){"use strict";function s(e,n=1e3){let d=0;return function(...p){let f=Date.now();f-d>n&&(d=f,e.apply(this,p))}}const w=function(e){if(!e)throw new Error("children of MgCarousel is empty!");!Array.isArray(e)||e.forEach(n=>{if(typeof n.type=="symbol"){w(n.children);return}if(n.type.name!=="MgCarouselItem")throw new Error("MgCarousel needs MgCarouselItem as children")})};var u=t.defineComponent({name:"MgCarousel",props:{height:{default:"100%",type:[Number,String]},initActiveIndex:{default:0,type:[Number,String]},autoplay:{default:!0,type:[Boolean]},interval:{default:3e3,type:[Number]},duration:{default:null,type:[Number]},direction:{default:"horizontal",type:[String],validator:e=>["horizontal","vertical"].indexOf(e)!==-1},dot:{default:!1,type:[Boolean]},dotTrigger:{default:"click",type:[String],validator:e=>["hover","click"].indexOf(e)!==-1},dotPosition:{default:"bottom",type:[String],validator:e=>["bottom","top","left","right"].indexOf(e)!==-1},infinity:{default:!1},type:{type:[String]},arrow:{default:"never",type:[String],validator:e=>["hover","never","always"].indexOf(e)!==-1},animate:{default:"scroll",type:[String],validator:e=>["scroll","fade"].indexOf(e)!==-1}},emits:["next","prev"],data(){return{show:!0}},setup(e,n){let d=!1;const p=n.slots.default&&n.slots.default();w(p);const f={items:[],activeIndex:parseInt(e.initActiveIndex)},r=t.reactive(f),a=o=>{const i=r.items.length;r.activeIndex<0||r.activeIndex>i-1||r.items.forEach((g,B)=>{g.proxy.computeTransform(B,r.activeIndex,i-1,o,e)})};let l;const c=s(()=>{clearInterval(l),h(),r.activeIndex>=r.items.length-1?r.activeIndex=0:r.activeIndex++,n.emit("next",r.activeIndex)},e.duration),y=s(()=>{clearInterval(l),h(),r.activeIndex===0?r.activeIndex=r.items.length-1:r.activeIndex--,n.emit("prev",r.activeIndex)},e.duration),b=(o,i)=>{if(!i&&o>=0&&o<=r.items.length){r.activeIndex=o;return}(i.type===e.dotTrigger||i.type==="mouseenter"&&e.dotTrigger==="hover")&&(r.activeIndex=o)},x=(o,i=!1)=>{i?(r.items=r.items.filter(g=>g.uid!==o.uid),y()):(r.items.push(o),d&&a())};t.provide("updateItems",x);const N=t.computed(()=>({height:e.height})),M=t.computed(()=>{const o={};return o[e.dotPosition]=!0,o}),I=t.ref(!1),T=o=>{e.arrow==="hover"&&(I.value=o)};t.onMounted(()=>{a(),d=!0}),t.watch(()=>r.activeIndex,(o,i)=>{a(i)});function h(){clearInterval(l),e.autoplay&&(l=setInterval(()=>{c()},e.interval))}return t.watchEffect(()=>{h()}),{next:c,prev:y,setActive:b,warpData:r,style:N,dotClass:M,arrowShow:I,arrowShowTrigger:T}}});const m=t.withScopeId("data-v-0fc70982");t.pushScopeId("data-v-0fc70982");const v=t.createVNode("i",{class:"mg-icon-last"},null,-1),S=t.createVNode("i",{class:"mg-icon-next"},null,-1);t.popScopeId();const k=m((e,n,d,p,f,r)=>(t.openBlock(),t.createBlock("div",{class:["mg-carousel",e.type==="card"?"mg-carousel-card":""],style:e.style,onMouseenter:n[3]||(n[3]=a=>e.arrowShowTrigger(!0)),onMouseleave:n[4]||(n[4]=a=>e.arrowShowTrigger(!1))},[t.renderSlot(e.$slots,"default"),e.dot?(t.openBlock(),t.createBlock("ul",{key:0,class:["mg-carousel-dots",e.dotClass]},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(e.warpData.items,(a,l)=>(t.openBlock(),t.createBlock("li",{key:l,onClick:c=>e.setActive(l,c),onMouseenter:c=>e.setActive(l,c)},[t.createVNode("button",{class:{active:l==e.warpData.activeIndex}},null,2)],40,["onClick","onMouseenter"]))),128))],2)):t.createCommentVNode("v-if",!0),t.createVNode(t.Transition,{name:"arrows-left"},{default:m(()=>[t.withDirectives(t.createVNode("button",{onClick:n[1]||(n[1]=(...a)=>e.prev&&e.prev(...a)),class:"arrows-left-btn"},[v],512),[[t.vShow,e.arrow==="always"||e.arrowShow]])]),_:1}),t.createVNode(t.Transition,{name:"arrows-right"},{default:m(()=>[t.withDirectives(t.createVNode("button",{onClick:n[2]||(n[2]=(...a)=>e.next&&e.next(...a)),class:"arrows-right-btn"},[S],512),[[t.vShow,e.arrow==="always"||e.arrowShow]])]),_:1})],38)));u.render=k,u.__scopeId="data-v-0fc70982";var C={name:"MgCarousel",install(e,n={}){e.component(u.name,u)}};return C});
