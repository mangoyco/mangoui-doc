(function(o,c){typeof exports=="object"&&typeof module!="undefined"?module.exports=c(require("vue")):typeof define=="function"&&define.amd?define(["vue"],c):(o=typeof globalThis!="undefined"?globalThis:o||self,o.n=c(o.Vue))})(this,function(o){"use strict";var c=o.defineComponent({name:"MgMessage",props:{message:{type:[String,Number],default:"info"},duration:{default:3,type:Number},gap:{type:Number},type:{type:String,default:"info",validator(e){return["info","warning","success","error"].includes(e)}}},emits:["close"],setup(e,{emit:n}){const t=o.getCurrentInstance();e.duration>0&&setTimeout(()=>{n("close",t)},e.duration*1e3)}});const f={class:"mg-message"};function u(e,n,t,i,p,r){return o.openBlock(),o.createBlock("div",f,[o.createVNode("i",{class:"mg-icon-"+e.type},null,2),o.createVNode("span",null,o.toDisplayString(e.message),1)])}c.render=u;function g(e){document.body.append(e)}function a(e,n,t){t!==void 0?e.style[n]=t:e.style=n}const l={modalDom:null,initZIndex:null,zIndex:null,appended:!1,nextzIndex(){return this.zIndex+=2}};window.pop=l;const s={nextTop:0,gap:20,allMsgVnode:[]};function m(e){const n=o.h(c,e),t=document.createElement("div");return o.render(n,t),s.allMsgVnode.push(n),n}function y(e){const n=e.el,t=`top:${s.nextTop}px;opacity:0;`;a(n,t),e._offsetHeight=n.offsetHeight,e._topForBack=s.nextTop;const i=e.component.props.gap||s.gap;e._top=s.nextTop+=i+e._offsetHeight;const p=`top:${e._top}px;opacity:1;`;a(n,p),l.appended&&a(n,"z-index",l.zIndex+1)}function x(e,n){s.allMsgVnode.forEach((t,i)=>{if(i>e){const p=n._offsetHeight+(n.component.props.gap||s.gap);t._topForBack-=p,t._top-=p,t.el.style.top=t._top+"px"}})}function h(e){e.addEventListener("transitionend",function(){document.body.removeChild(this)},{once:!0})}function d(e){const n=e.vnode,t=s.allMsgVnode.findIndex(C=>C===n),i=n.el;h(i);const p=`top:${n._topForBack}px;opacity:0`;a(i,p),a(i,"z-index",i.style.zIndex);const r=n.component.props.gap||s.gap;s.nextTop-=n._offsetHeight+r,x(t,n),s.allMsgVnode.splice(t,1)}function _(e){if(e.onClose){const n=e.onClose;e.onClose=t=>{n(t),d(t)}}else e.onClose=d}function M(e){_(e);const n=m(e);g(n.el),y(n)}var T={install(e,n={}){e.config.globalProperties.$message=M}};return T});
